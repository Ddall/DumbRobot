{# DdxDrWebBundle:History:index.html.twig #}
{% extends "::base.html.twig" %}
{% block body %}
    <div class="row">
        <div class="col-md-12">
            <h1>Weighted data (5 minutes increments)</h1>
            <table class="table table-striped table-striped table-condensed">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Weighted price</th>
                        <th>Volume</th>
                        <th>Number of trades</th>
                    </tr>
                </thead>
                <tbody>
                    
            (SUM(wPrice) / SUM(volume)) vwap,
            SUM(volume) as volume,
            MIN(timeRemote) as period,
            COUNT(id) as nTrades
                    {% for trade in vwapData %}
                    <tr>
                        <td>{{ trade.period|date( format_datetime ) }}</td>
                        <td>{{ trade.vwap }} â‚¬</td>
                        <td>{{ trade.volume }} BTC</td>
                        <td>{{ trade.nTrades }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <h1>All Trades:</h1>
            <table class="table table-striped table-hover table-condensed">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Volume</th>
                        <th>Price</th>
                        <th>OrderType</th>
                    </tr>
                </thead>
                <tbody>
            {% for trade in allTrades %}
                <tr>
                    <td>{{ trade.timeRemote|date( format_datetime ) }}</td>
                    <td>{{ trade.volume }} {{ trade.assetFrom }}</td>
                    <td>{{ trade.price }} {{trade.assetTo }} </td>
                    <td>{{ trade.direction }} {{ trade.orderType }}</td>
                </tr>
            {% endfor %}
                </tbody>
            </table>
        </div>
                
        <div class="col-md-6">
            <h1>5 min avg:</h1>
            <table class="table table-striped table-hover table-condensed">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Volume</th>
                        <th>Average price</th>
                    </tr>
                </thead>
                <tbody>
   {#         {% for trade in avg5Min %}
                <tr>
                    <td>{{ trade.timeRemote|date( format_datetime ) }}</td>
                    <td>{{ trade.volume }} {{ trade.assetFrom }}</td>
                    <td>{{ trade.price }} {{trade.assetTo }} </td>
                    <td>{{ trade.direction }} {{ trade.orderType }}</td>
                </tr>
            {% endfor %}#}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
